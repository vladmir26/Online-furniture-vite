<script setup>
import { ref } from 'vue';
import ProductCount from '../components/Product-count.vue'

const isActiveSearch = ref(false);
const isActiveMenu = ref(false);

const addSearch = () => {
  isActiveSearch.value = !isActiveSearch.value
  isActiveMenu.value = false;
}

const addMenu = () => {
  isActiveMenu.value = !isActiveMenu.value
  isActiveSearch.value = false;
}
</script>

<template>
 <header id="header" :class="{'active-search': isActiveSearch, 'active-menu': isActiveMenu}">
    <div class="wrapper container">
        <div class="wrapper__search-hamburger">
          <a class="link-icons wrapper__search-link js-search-link" href="#" @click.prevent="addSearch"> 
            <svg class="wrapper__search" width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="16" height="16" fill="white" style="mix-blend-mode:multiply"></rect>
              <path d="M14.5 13.7931L10.7239 10.017C11.6313 8.9277 12.0838 7.5305 11.9872 6.11608C11.8907 4.70165 11.2525 3.37891 10.2055 2.423C9.15855 1.4671 7.78335 0.951637 6.366 0.983845C4.94865 1.01605 3.59828 1.59345 2.59581 2.59593C1.59333 3.5984 1.01593 4.94877 0.983723 6.36612C0.951515 7.78347 1.46698 9.15867 2.42288 10.2057C3.37879 11.2526 4.70153 11.8908 6.11596 11.9873C7.53038 12.0839 8.92758 11.6314 10.0169 10.7241L13.7929 14.5001L14.5 13.7931ZM2 6.50012C2 5.6101 2.26392 4.74007 2.75838 4.00005C3.25285 3.26003 3.95565 2.68325 4.77792 2.34266C5.60019 2.00207 6.50499 1.91295 7.3779 2.08658C8.25082 2.26022 9.05264 2.6888 9.68198 3.31814C10.3113 3.94747 10.7399 4.7493 10.9135 5.62221C11.0872 6.49513 10.998 7.39993 10.6575 8.22219C10.3169 9.04446 9.74008 9.74726 9.00006 10.2417C8.26004 10.7362 7.39001 11.0001 6.5 11.0001C5.30693 10.9988 4.1631 10.5243 3.31948 9.68064C2.47585 8.83701 2.00132 7.69319 2 6.50012Z" fill="currentColor"></path>
            </svg>
            <span class="close-form js-close-form">&#10006;</span>
          </a>
          <a class="link-icons wrapper__hamburger-link js-hamburger-link" href="#" @click.prevent="addMenu">
            <svg class="wrapper__hamburger" width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="16" height="16" fill="white" style="mix-blend-mode:multiply"></rect>
                <path d="M14 3H2V4H14V3Z" fill="#2A254B"></path>
                <path d="M14 12H2V13H14V12Z" fill="#2A254B"></path>
                <path d="M14 6H2V7H14V6Z" fill="#2A254B"></path>
                <path d="M14 9H2V10H14V9Z" fill="#2A254B"></path>
            </svg>
            <span class="close-menu js-close-menu">&#10006;</span></a></div>
        <p class="wrapper__title"> 
          <router-link class="wrapper__title-link" to="/">Avion</router-link></p>
        <div class="wrapper__icons">
            <ProductCount></ProductCount>
            <a class="link-icons wrapper__user-link" href="#"> 
              <svg class="wrapper__user" width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="16" height="16" fill="white" style="mix-blend-mode:multiply"></rect>
                  <path d="M8 4C7.50555 4 7.0222 4.14662 6.61108 4.42133C6.19995 4.69603 5.87952 5.08648 5.6903 5.54329C5.50108 6.00011 5.45158 6.50277 5.54804 6.98773C5.6445 7.47268 5.88261 7.91814 6.23224 8.26777C6.58187 8.6174 7.02733 8.8555 7.51228 8.95196C7.99723 9.04843 8.4999 8.99892 8.95671 8.8097C9.41353 8.62048 9.80397 8.30005 10.0787 7.88893C10.3534 7.4778 10.5 6.99445 10.5 6.5C10.5 5.83696 10.2366 5.20107 9.76777 4.73223C9.29893 4.26339 8.66304 4 8 4ZM8 8C7.70333 8 7.41332 7.91203 7.16665 7.7472C6.91997 7.58238 6.72772 7.34811 6.61418 7.07403C6.50065 6.79994 6.47095 6.49834 6.52882 6.20736C6.5867 5.91639 6.72956 5.64912 6.93934 5.43934C7.14912 5.22956 7.4164 5.0867 7.70737 5.02882C7.99834 4.97094 8.29994 5.00065 8.57403 5.11418C8.84812 5.22771 9.08239 5.41997 9.24721 5.66664C9.41203 5.91332 9.5 6.20333 9.5 6.5C9.49955 6.89769 9.34137 7.27896 9.06017 7.56016C8.77896 7.84137 8.39769 7.99955 8 8Z" fill="currentColor"></path>
                  <path d="M8 1C6.61553 1 5.26216 1.41054 4.11101 2.17971C2.95987 2.94888 2.06266 4.04213 1.53285 5.32122C1.00303 6.6003 0.86441 8.00776 1.13451 9.36563C1.4046 10.7235 2.07129 11.9708 3.05026 12.9497C4.02922 13.9287 5.2765 14.5954 6.63437 14.8655C7.99224 15.1356 9.3997 14.997 10.6788 14.4672C11.9579 13.9373 13.0511 13.0401 13.8203 11.889C14.5895 10.7378 15 9.38447 15 8C14.9979 6.14413 14.2597 4.36486 12.9474 3.05256C11.6351 1.74026 9.85588 1.00209 8 1ZM5 13.1882V12.5C5.00044 12.1023 5.15862 11.721 5.43983 11.4398C5.72104 11.1586 6.10231 11.0004 6.5 11H9.5C9.89769 11.0004 10.279 11.1586 10.5602 11.4398C10.8414 11.721 10.9996 12.1023 11 12.5V13.1882C10.0896 13.7199 9.05426 14 8 14C6.94574 14 5.91042 13.7199 5 13.1882ZM11.9963 12.4629C11.9863 11.807 11.7191 11.1813 11.2521 10.7206C10.7852 10.2599 10.156 10.0011 9.5 10H6.5C5.84405 10.0011 5.2148 10.2599 4.74786 10.7206C4.28093 11.1813 4.01369 11.807 4.00375 12.4629C3.09703 11.6533 2.45762 10.5873 2.17017 9.40623C1.88272 8.22513 1.9608 6.98457 2.39407 5.84883C2.82734 4.71309 3.59536 3.73573 4.59644 3.04618C5.59751 2.35663 6.78442 1.98741 8 1.98741C9.21558 1.98741 10.4025 2.35663 11.4036 3.04618C12.4046 3.73573 13.1727 4.71309 13.6059 5.84883C14.0392 6.98457 14.1173 8.22513 13.8298 9.40623C13.5424 10.5873 12.903 11.6533 11.9963 12.4629Z" fill="currentColor"></path>
                </svg>
            </a>
        </div>
    </div>
    <form class="wrapper__form js-form" action="">
      <input class="js-input" placeholder="Search here" type="search" />
      <button class="js-button" type="button">Search</button>
    </form>
    <ul class="menu js-menu">
        <li class="menu__item"> <a class="menu__link" href="#">Plant pots</a></li>
        <li class="menu__item"> <a class="menu__link" href="#">Ceramics</a></li>
        <li class="menu__item"> <a class="menu__link" href="#">Tables</a></li>
        <li class="menu__item"> <a class="menu__link" href="#">Chairs</a></li>
        <li class="menu__item"> <a class="menu__link" href="#">Crockery</a></li>
        <li class="menu__item"> <a class="menu__link" href="#">Tableware</a></li>
        <li class="menu__item"> <a class="menu__link" href="#">Cutlery</a></li>
    </ul>
</header>
</template>

<style lang="scss">
@import '../variables.scss';
@import '../main.scss';
.header {
  padding-top: 40px;
  transition: padding-top 2s;
}

.header-animation {
  padding-top: 0;
}

.wrapper {
  position: relative;
  display: flex;
  justify-content: space-between;
  padding-top: 20px;
  padding-right: 28px;
  padding-left: 28px;
  font-size: 24px;

  &__title-link {
    color: $color-secondary;
  }

  &__icons {
    display: flex;
  }

  &__hamburger {
    display: none;
  }

  &__product-count {
    position: absolute;
    right: 10px;
    display: block;
    width: 17px;
    height: 17px;
    padding: 2px 2px;
    padding-left: 0;
    font-size: 10px;
    line-height: 10px;
    color: $color-primary;
    text-align: center;
    background-color: $background-primary;
    border: 2px solid $background-primary;
    border-radius: 50%;
  }

  &__product-count-active {
    display: block;
  }

  &__product-count-active-animation {
    animation: addToCart 2s 3;
  }

  &__cart-link {
    position: relative;
    margin-right: 16px;
  }
}

.wrapper::after {
  position: absolute;
  top: 70px;
  right: 30px;
  left: 30px;
  content: "";
  border: 1px solid rgba(0 0 0 / 10%);
}

.menu {
  display: flex;
  justify-content: center;
  margin-top: 40px;
  font-family: $font-secondary;
  font-size: 16px;

  &__item {
    padding-right: 45px;
  }

  &__item:last-child {
    padding-right: 0;
  }

  &__link {
    color: $color-third;
  }
}

.close-menu {
  display: none;
}

.close-form {
  display: none;
}

.wrapper__form {
  display: none;
}
.active-search,
.js-header--show-search {
  .wrapper__search {
    display: none;
  }

  .js-close-form {
    display: flex;
    flex-direction: column;
    align-items: end;
    width: 16px;
    height: 16px;
    color: #000;
  }

  .js-form {
    position: absolute;
    top: 20px;
    left: 70px;
    display: flex;
    height: 30px;
    background-color: $background-primary;
  }

  .js-input {
    padding-right: 5px;
    padding-left: 5px;
    color: $color-primary;
    background-color: rgba(255 255 255 / 15%);
    border: 3px solid $background-primary;
  }

  .js-input::placeholder {
    color: $color-primary;
  }

  .js-button {
    padding: 5px 5px 5px;
    font-family: $font-secondary;
    color: $background-primary;
    background-color: $color-primary;
    border: 3px solid $background-primary;
  }
}

@keyframes addToCart {
  0% {
    opacity: 0;
  }

  50% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
}

@media screen and (max-width: 767px) {
  .wrapper {
    padding: 20px;

    &__icons {
      display: none;
    }

    &__title-link {
      order: 1;
    }

    &__search-hamburger {
      display: flex;
      order: 2;
    }

    &__search-link {
      padding-right: 20px;
    }

    &__search-link--active {
      display: none;
    }

    &__form {
      display: none;
    }

    &__hamburger-link--active {
      display: none;
    }

    &__hamburger {
      display: inline;
    }
  }

  .wrapper::after {
    display: none;
  }
  .active-search,
  .js-header--show-search {
    .wrapper__search {
      display: none;
    }

    .js-close-form {
      display: flex;
      flex-direction: column;
      align-items: end;
      width: 16px;
      height: 16px;
      color: #000;
    }

    .js-form {
      position: absolute;
      top: 80px;
      left: 25px;
      display: flex;
      height: 30px;
      background-color: $color-primary;
    }

    .js-input {
      width: calc(100% - 94px);
      padding-right: 10px;
      padding-left: 10px;
      margin: 5px;
      background-color: $background-third;
      border: 2px solid $background-third;
    }

    .js-input::placeholder {
      color: $background-primary;
      opacity: 0.2;
    }

    .js-button {
      padding: 5px 10px;
      font-family: $font-secondary;
      color: $color-primary;
      background-color: $background-primary;
      border: 2px solid $color-primary;
    }
  }

  .menu {
    display: none;

    &__item {
      padding: 0;
    }
  }
  .active-menu,
  .js-header--show-menu {
    .wrapper__hamburger {
      display: none;
    }

    .js-close-menu {
      display: flex;
      justify-content: end;
      order: 1;
      width: 16px;
      height: 16px;
      color: #000;
    }

    .js-menu {
      position: absolute;
      top: 69px;
      right: 20px;
      display: flex;
      flex-direction: column;
      padding: 20px;
      margin-top: 0;
      background-color: #fff;
      border-top: 1px solid;
    }
  }
}

</style>
